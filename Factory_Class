import pgeocode #may need to be installed at the copmmand line
from collections import Counter

dist = pgeocode.GeoDistance('GB')

class Factory:
    #class of factory 
    def __init__(self,cost_weight,location):
        self.Factory_ID = None
        self.SKU_types = None #list of all the SKUs in the factory
        self.cost_weight = cost_weight #a multipler for how effiecent the factory is
        self.location = location #postcode of the factory
        self.fact_inv = None
    
    def box_check(self,box_in):
        #function to check if a factory can complete an order
        check = all(item in box_in for item in self.SKU_types)
        return check
    
    def cons_dist(self,order):
        #Function to find the Haversine distance between the factory and the order
        fact_dist = dist.query_postal_code(self.location, order.location)
        return fact_dist
    
    def SKU_Holding(self,inventory):
        #find all the unique items in the inventory
        SKU_list = [*inventory]
        self.SKU_types = SKU_list
        
    def Get_FID(self,FID_dict):
        if self.location in FID_dict:
            self.Factory_ID = FID_dict[self.location]
        else:
            self.Factory_ID = len(FID_dict)
            FID_dict[self.location] = self.Factory_ID
